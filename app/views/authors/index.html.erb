<h1>Authors</h1>
<div class="mb-3">
  <%= link_to 'New Author', new_author_path, class: 'btn btn-primary' %>
  <%= link_to 'Books', books_path, class: 'btn btn-secondary' %>
</div>

<table class="table table-bordered table-hover">
  <thead class="table-dark">
    <tr>
      <th>Name</th>
      <th>Books</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @authors.each do |author| %>
      <tr>
        <td><%= author.name %></td>
        <td>
          <% if author.books.any? %>
            <ul class="list-unstyled mb-0">
              <% author.books.each do |book| %>
                <li><%= link_to book.title, book_path(book) %></li>
              <% end %>
            </ul>
          <% else %>
            <span class="text-muted">No books available</span>
          <% end %>
        </td>
        <td>
          <%= link_to 'Edit', edit_author_path(author), class: 'btn btn-sm btn-warning me-2' %>
          <%= link_to 'Show', author_path(author), class: 'btn btn-sm btn-info me-2' %>
          <%= link_to 'Destroy', author_path(author), data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }, class: 'btn btn-sm btn-danger' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
